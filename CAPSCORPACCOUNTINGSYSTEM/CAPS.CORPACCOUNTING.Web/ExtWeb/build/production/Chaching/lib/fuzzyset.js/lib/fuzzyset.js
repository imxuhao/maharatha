(function(){var b=function(l,k,f,n){var d={version:"0.0.1"};l=l||[];d.gramSizeLower=f||2;d.gramSizeUpper=n||3;d.useLevenshtein=(typeof k!=="boolean")?true:k;d.exactSet={};d.matchDict={};d.items={};var m=function(t,r){var u=[],q,s;for(var p=0;p<=r.length;p++){for(var o=0;o<=t.length;o++){if(p&&o){if(t.charAt(o-1)===r.charAt(p-1)){s=q}else{s=Math.min(u[o],u[o-1],q)+1}}else{s=p+o}q=u[o];u[o]=s}}return u.pop()};var e=function(o,i){if(o===null&&i===null){throw"Trying to compare two null values"}if(o===null||i===null){return 0}o=String(o);i=String(i);var p=m(o,i);if(o.length>i.length){return 1-p/o.length}else{return 1-p/i.length}};var j=/[^\w, ]+/;var g=function(r,s){s=s||2;var t="-"+r.toLowerCase().replace(j,"")+"-",o=s-t.length,q=[];if(o>0){for(var p=0;p<o;++p){r+="-"}}for(var p=0;p<t.length-s+1;++p){q.push(t.slice(p,p+s))}return q};var c=function(r,s){s=s||2;var o={},p=g(r,s),q=0;for(q;q<p.length;++q){if(p[q] in o){o[p[q]]+=1}else{o[p[q]]=1}}return o};d.get=function(p,o){var i=this._get(p);if(!i&&o){return o}return i};d._get=function(q){var p=this._normalizeStr(q),i=this.exactSet[p];if(i){return[[1,i]]}var o=[];for(var r=this.gramSizeUpper;r>=this.gramSizeLower;--r){o=this.__get(q,r);if(o){return o}}return null};d.__get=function(C,H){var o=this._normalizeStr(C),p={},D=c(o,H),z=this.items[H],x=0,r,A,F,t,v;for(r in D){A=D[r];x+=Math.pow(A,2);if(r in this.matchDict){for(F=0;F<this.matchDict[r].length;++F){t=this.matchDict[r][F][0];v=this.matchDict[r][F][1];if(t in p){p[t]+=A*v}else{p[t]=A*v}}}}function u(i){for(var I in i){if(i.hasOwnProperty(I)){return false}}return true}if(u(p)){return null}var G=Math.sqrt(x),B=[],w;for(var q in p){w=p[q];B.push([w/(G*z[q][0]),z[q][1]])}var y=function(I,i){if(I[0]<i[0]){return 1}else{if(I[0]>i[0]){return -1}else{return 0}}};B.sort(y);if(this.useLevenshtein){var E=[],s=Math.min(50,B.length);for(var F=0;F<s;++F){E.push([e(B[F][1],o),B[F][1]])}B=E;B.sort(y)}var E=[];for(var F=0;F<B.length;++F){if(B[F][0]==B[0][0]){E.push([B[F][0],this.exactSet[B[F][1]]])}}return E};d.add=function(q){var p=this._normalizeStr(q);if(p in this.exactSet){return false}var o=this.gramSizeLower;for(o;o<this.gramSizeUpper+1;++o){this._add(q,o)}};d._add=function(w,i){var v=this._normalizeStr(w),u=this.items[i]||[],s=u.length;u.push(0);var p=c(v,i),o=0,q,r;for(q in p){r=p[q];o+=Math.pow(r,2);if(q in this.matchDict){this.matchDict[q].push([s,r])}else{this.matchDict[q]=[[s,r]]}}var t=Math.sqrt(o);u[s]=[t,v];this.items[i]=u;this.exactSet[v]=w};d._normalizeStr=function(i){if(Object.prototype.toString.call(i)!=="[object String]"){throw"Must use a string as argument to FuzzySet functions"}return i.toLowerCase()};d.length=function(){var i=0,o;for(o in this.exactSet){if(this.exactSet.hasOwnProperty(o)){i+=1}}return i};d.isEmpty=function(){for(var i in this.exactSet){if(this.exactSet.hasOwnProperty(i)){return false}}return true};d.values=function(){var i=[],o;for(o in this.exactSet){if(this.exactSet.hasOwnProperty(o)){i.push(this.exactSet[o])}}return i};var h=d.gramSizeLower;for(h;h<d.gramSizeUpper+1;++h){d.items[h]=[]}for(h=0;h<l.length;++h){d.add(l[h])}return d};var a=this;if(typeof module!=="undefined"&&module.exports){module.exports=b;a.FuzzySet=b}else{a.FuzzySet=b}})();